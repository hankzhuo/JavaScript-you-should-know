## 重排

![](leanote://file/getImage?fileId=5d5c04a13a6a9a4a51000005)

修改元素高度、宽度等，浏览器会触发布局阶段，解析后面一系列操作，这个过程叫作**重排**。

重排需要更新完整的流水线，所以开销大

引起重排的一些操作：
- 浏览器窗口大小发生变化
- 元素尺寸或位置发生变化
- 添加或者删除可见的 DOM 元素
- 内容发生变化，比如文本变化或者 图片被另一张不同大小图片替换

## 重绘

![](leanote://file/getImage?fileId=5d5c04ce3a6a9a4a51000006)

修改背景色，布局阶段不会被执行，直接进入绘制阶段，然后执行后面的一系列过程，这个过程叫做**重绘**

重绘省去了布局和分层阶段，所以执行效率比重排高

## 合成

![](leanote://file/getImage?fileId=5d5c05bd3a6a9a4a51000007)

渲染引擎直接跳过了布局和绘制，只执行后面合成操作，这过程叫做**合成**。

使用 CSS 的 transform 来实现的动画效果，可以避免重绘和重排，直接在非主线程上执行合成动画，效率非常高。

## 减少重绘、重排的方法

 避免频繁操作样式，集中一次重写 style属性，或者使用 class 属性
 批量修改 DOM，一次性插入节点
 对于复杂的动画效果，使用绝对定位使其脱离文档流
 使用 CSS 的 transform、opacity 来实现动画避免重排和重绘
 先隐藏元素（display：none），应用修改，重新显示（display：block）
